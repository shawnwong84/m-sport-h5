<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<a class="copy" id="iosSign" data-type="iosSign" onclick="return handleDownload(this)" data-clipboard-text="" href=" ">
  <i class="iconfont icon-appstore"></i>
  <span>添加到主屏幕</span>
</a >
<a class="copy" data-type="android" data-clipboard-text="" onclick="return handleDownload(this)" href=" ">
  <i class="iconfont icon-android"></i>
  <span>安卓版下载</span>
</a >
<script>
  // 下载
  let canClick = true
handleDownload = (dom) => {
    // 获取节点的自定义属性 type是节点的安卓/ios
    // data-type="iosSign"
    // data-type="android"
    // data-type="shortcut"
    let downloadType = dom.dataset.type
  const contents = [
    'ios安装包程序员小哥哥正在紧急处理中,稍后再来下载哦',
    '安卓安装包程序员小哥哥正在紧急处理中,稍后再来下载哦',
    '应用正在下载,十秒后仍未安装请再次点击下载',
    '请使用苹果自带的Safari浏览器打开',
    '若要安装 请先在设置 -设备管理 -查看描述文件'
  ]

    var Sys = {}
  // 获取浏览器userAgent信息
  var ua = navigator.userAgent.toLowerCase()
  var s;
    (s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0

  switch (downloadType) {
    case 'iosSign':
      if (!Sys.safari) {
        layer.open({ content: contents[3], skin: 'msg', time: 2 })
        return false
      }
      layer.open({
        content: contents[4],
        skin: 'message',
        btn: ['确定'],
        yes: function (index, layero) {
          console.log(dom)
          window.open('static/hszb2.mobileconfig', '_parent')
          layer.close(index) // 如果设定了yes回调，需进行手工关闭
        }
      })
      return true

    case 'android':
      if (!ad_url) {
        layer.open({ content: contents[1], skin: 'msg', time: 2 })
        return false
      }
      canClick = false
      layer.open({ content: contents[2], skin: 'msg', time: 8 })
      $(dom).attr('href', ad_url)
      return true

    case 'shortcut':
      if (!Sys.safari) {
        layer.open({ content: contents[3], skin: 'msg', time: 2 })
        return false
      }
      canClick = false
      $(dom).attr('href', 'static/hszb.mobileconfig')
      return true

    default: return false
  }
  }
</script>
</body>
</html>
